{"ast":null,"code":"import{createSlice}from\"@reduxjs/toolkit\";var initialState={total:0,products:[]};export var cartSlice=createSlice({name:'cart',initialState:initialState,reducers:{resetCart:function resetCart(state){state=initialState;},addCart:function addCart(state,action){var _action$payload=action.payload,product=_action$payload.product,selectedVariation=_action$payload.selectedVariation,quantity=_action$payload.quantity;state.products.push({product:product,selectedVariation:selectedVariation,quantity:quantity});state.total+=selectedVariation.buy_price*quantity;},changeQuantity:function changeQuantity(state,action){var product=state.products.find(function(_ref){var product=_ref.product;return product.id===action.payload.product_id;});if(product){state.total-=product.quantity*product.selectedVariation.buy_price;product.quantity=action.payload.quantity;state.total+=product.quantity*product.selectedVariation.buy_price;}},changeSelectedVariation:function changeSelectedVariation(state,action){var product=state.products.find(function(_ref2){var product=_ref2.product;return product.id===action.payload.product_id;});if(product){state.total-=product.quantity*product.selectedVariation.buy_price;product.selectedVariation=action.payload.selectedVariation;state.total+=product.quantity*product.selectedVariation.buy_price;}},removeCart:function removeCart(state,action){var product_id=action.payload.product_id;state.products=state.products.filter(function(_ref3){var product=_ref3.product,selectedVariation=_ref3.selectedVariation,quantity=_ref3.quantity;if(product.id===product_id){state.total-=selectedVariation.buy_price*quantity;if(state.total<0)state.total=0;return false;}else return true;});}}});var _cartSlice$actions=cartSlice.actions,resetCart=_cartSlice$actions.resetCart,addCart=_cartSlice$actions.addCart,changeQuantity=_cartSlice$actions.changeQuantity,changeSelectedVariation=_cartSlice$actions.changeSelectedVariation,removeCart=_cartSlice$actions.removeCart;export{resetCart,addCart,changeQuantity,changeSelectedVariation,removeCart};export default cartSlice.reducer;","map":{"version":3,"names":["createSlice","initialState","total","products","cartSlice","name","reducers","resetCart","state","addCart","action","_action$payload","payload","product","selectedVariation","quantity","push","buy_price","changeQuantity","find","_ref","id","product_id","changeSelectedVariation","_ref2","removeCart","filter","_ref3","_cartSlice$actions","actions","reducer"],"sources":["/home/z3r0/Desktop/binastaNode2/client-distributor-shop/src/store/reducers/cartSlice.ts"],"sourcesContent":["import { Product } from \"@/types/Product\";\nimport { ProductVariation } from \"@/types/ProductVariation.type\";\nimport { createSlice } from \"@reduxjs/toolkit\";\n\nexport type Cart = {\n    total: number,\n    products: CartProduct[]\n};\n\nexport type CartProduct = {\n    product: Product,\n    selectedVariation: ProductVariation,\n    quantity: number\n};\n\nconst initialState: Cart = {\n    total: 0,\n    products: [] as CartProduct[]\n};\n\nexport const cartSlice = createSlice({\n    name: 'cart',\n    initialState,\n    reducers: {\n        resetCart: (state) => {\n            state = initialState;\n        },\n        addCart: (state, action) =>  {\n            const {product,  selectedVariation, quantity } = action.payload;\n            state.products.push({\n                product,\n                selectedVariation,\n                quantity\n            });\n            state.total += selectedVariation.buy_price * quantity;\n        },\n        changeQuantity: (state, action) => {\n            const product = state.products.find(({ product }) => product.id === action.payload.product_id);\n            if (product) {\n                state.total -= product.quantity * product.selectedVariation.buy_price;\n                product.quantity = action.payload.quantity;\n                state.total += product.quantity * product.selectedVariation.buy_price;\n            }\n        },\n        changeSelectedVariation: (state, action) => {\n            const product = state.products.find(({ product }) => product.id === action.payload.product_id);\n            if (product) {\n                state.total -= product.quantity * product.selectedVariation.buy_price;\n                product.selectedVariation = action.payload.selectedVariation;\n                state.total += product.quantity * product.selectedVariation.buy_price;\n            }\n        },\n        removeCart: (state, action) => {\n            const { product_id } = action.payload;\n            state.products = state.products.filter(({ product, selectedVariation, quantity }) => {\n                if (product.id === product_id) {\n                    state.total -= selectedVariation.buy_price * quantity;\n                    if (state.total < 0) state.total = 0;\n                    return false;\n                } else return true;\n            })\n        },\n    }\n});\n\nexport const { resetCart, addCart, changeQuantity, changeSelectedVariation, removeCart } = cartSlice.actions;\n\nexport default cartSlice.reducer;"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}