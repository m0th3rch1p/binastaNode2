{"ast":null,"code":"import{createSlice}from\"@reduxjs/toolkit\";import{createApi,fetchBaseQuery}from\"@reduxjs/toolkit/dist/query/react\";var initialState={id:0,ref:'',variations:[]};export var orderApiSlice=createApi({reducerPath:'orderApi',baseQuery:fetchBaseQuery({baseUrl:\"/orders\"}),tagTypes:[\"orders\"],endpoints:function endpoints(builder){return{fetchOrders:builder.query({query:function query(){return\"/\";},transformResponse:function transformResponse(response){return response.orders;},providesTags:[\"orders\"]}),fetchSingleOrder:builder.query({query:function query(id){return\"/\".concat(id);},transformResponse:function transformResponse(response){return{order:response.order,product_variations:response.product_variations};},providesTags:[\"orders\"]}),placeOrder:builder.mutation({query:function query(order){return{url:\"/\",method:\"POST\",body:{user_address_id:order.user_address_id,product_variations:order.product_variations}};},transformResponse:function transformResponse(response){return response;}})};}});var useFetchOrdersQuery=orderApiSlice.useFetchOrdersQuery,useFetchSingleOrderQuery=orderApiSlice.useFetchSingleOrderQuery,usePlaceOrderMutation=orderApiSlice.usePlaceOrderMutation;export{useFetchOrdersQuery,useFetchSingleOrderQuery,usePlaceOrderMutation};export var orderSlice=createSlice({name:'orders',initialState:initialState,reducers:{resetOrderSlice:function resetOrderSlice(){return initialState;}}});var resetOrderSlice=orderSlice.actions.resetOrderSlice;export{resetOrderSlice};export default orderSlice.reducer;","map":{"version":3,"names":["createSlice","createApi","fetchBaseQuery","initialState","id","ref","variations","orderApiSlice","reducerPath","baseQuery","baseUrl","tagTypes","endpoints","builder","fetchOrders","query","transformResponse","response","orders","providesTags","fetchSingleOrder","concat","order","product_variations","placeOrder","mutation","url","method","body","user_address_id","useFetchOrdersQuery","useFetchSingleOrderQuery","usePlaceOrderMutation","orderSlice","name","reducers","resetOrderSlice","actions","reducer"],"sources":["/home/z3r0/Desktop/binastaNode2/client-distributor-shop/src/store/reducers/ordersSlice.ts"],"sourcesContent":["import { BASE_URL } from \"@/constants/apiStatus\";\nimport { ProductVariation } from \"@/types/ProductVariation.type\";\nimport { createSlice } from \"@reduxjs/toolkit\";\nimport { createApi, fetchBaseQuery } from \"@reduxjs/toolkit/dist/query/react\";\n\nexport type Order = {\n    id?: number,\n    ref?: string,\n    status?: string,\n    amount?: number,\n    address?: string,\n    phone_number?: string,\n    variations?: ProductVariation[],\n    created_at?: string\n};\n\nconst initialState: Order = {\n    id: 0,\n    ref: '',\n    variations: [] as ProductVariation[]\n};\n\nexport const orderApiSlice = createApi({\n    reducerPath: 'orderApi',\n    baseQuery: fetchBaseQuery({\n        baseUrl: `/orders`\n    }),\n    tagTypes: [\"orders\"],\n    endpoints: (builder) => ({\n        fetchOrders: builder.query<Order[], void>({\n            query: () => \"/\",\n            transformResponse: (response: { orders: Order[] }) => {\n                return response.orders\n            },\n            providesTags: [\"orders\"]\n        }),\n        fetchSingleOrder: builder.query<{ order: Order, product_variations: {id: number, variation: string, buy_price: number, product_name: string, quantity: number}[]}, number>({\n            query: (id) => `/${id}`,\n            transformResponse: (response: { order: Order, product_variations: {id: number, variation: string, buy_price: number, product_name: string, quantity: number}[] }) => {\n                return {order: response.order, product_variations: response.product_variations};\n            },\n            providesTags: [\"orders\"]\n        }),\n        placeOrder: builder.mutation<{ status: number, id: number }, { user_address_id: number, product_variations: [number, number][] }>({\n            query: (order) => ({\n                url: \"/\",\n                method: \"POST\",\n                body: { user_address_id: order.user_address_id, product_variations: order.product_variations }\n            }),\n            transformResponse: (response: { status: number, id: number }) => {\n                return response\n            },\n        })   \n    })\n});\n\nexport const { useFetchOrdersQuery, useFetchSingleOrderQuery, usePlaceOrderMutation } = orderApiSlice;\n\nexport const orderSlice = createSlice({\n    name: 'orders',\n    initialState,\n    reducers: {\n        resetOrderSlice: () => initialState\n    }\n});\n\nexport const { resetOrderSlice } = orderSlice.actions;\n\nexport default orderSlice.reducer;"],"mappings":"AAEA,OAASA,WAAW,KAAQ,kBAAkB,CAC9C,OAASC,SAAS,CAAEC,cAAc,KAAQ,mCAAmC,CAa7E,GAAM,CAAAC,YAAmB,CAAG,CACxBC,EAAE,CAAE,CAAC,CACLC,GAAG,CAAE,EAAE,CACPC,UAAU,CAAE,EAChB,CAAC,CAED,MAAO,IAAM,CAAAC,aAAa,CAAGN,SAAS,CAAC,CACnCO,WAAW,CAAE,UAAU,CACvBC,SAAS,CAAEP,cAAc,CAAC,CACtBQ,OAAO,UACX,CAAC,CAAC,CACFC,QAAQ,CAAE,CAAC,QAAQ,CAAC,CACpBC,SAAS,CAAE,SAAAA,UAACC,OAAO,QAAM,CACrBC,WAAW,CAAED,OAAO,CAACE,KAAK,CAAgB,CACtCA,KAAK,CAAE,SAAAA,MAAA,QAAM,GAAG,GAChBC,iBAAiB,CAAE,SAAAA,kBAACC,QAA6B,CAAK,CAClD,MAAO,CAAAA,QAAQ,CAACC,MAAM,CAC1B,CAAC,CACDC,YAAY,CAAE,CAAC,QAAQ,CAC3B,CAAC,CAAC,CACFC,gBAAgB,CAAEP,OAAO,CAACE,KAAK,CAA4I,CACvKA,KAAK,CAAE,SAAAA,MAACX,EAAE,YAAAiB,MAAA,CAASjB,EAAE,GAAE,CACvBY,iBAAiB,CAAE,SAAAA,kBAACC,QAA4I,CAAK,CACjK,MAAO,CAACK,KAAK,CAAEL,QAAQ,CAACK,KAAK,CAAEC,kBAAkB,CAAEN,QAAQ,CAACM,kBAAkB,CAAC,CACnF,CAAC,CACDJ,YAAY,CAAE,CAAC,QAAQ,CAC3B,CAAC,CAAC,CACFK,UAAU,CAAEX,OAAO,CAACY,QAAQ,CAAsG,CAC9HV,KAAK,CAAE,SAAAA,MAACO,KAAK,QAAM,CACfI,GAAG,CAAE,GAAG,CACRC,MAAM,CAAE,MAAM,CACdC,IAAI,CAAE,CAAEC,eAAe,CAAEP,KAAK,CAACO,eAAe,CAAEN,kBAAkB,CAAED,KAAK,CAACC,kBAAmB,CACjG,CAAC,EAAC,CACFP,iBAAiB,CAAE,SAAAA,kBAACC,QAAwC,CAAK,CAC7D,MAAO,CAAAA,QAAQ,CACnB,CACJ,CAAC,CACL,CAAC,EACL,CAAC,CAAC,CAEK,GAAQ,CAAAa,mBAAmB,CAAsDvB,aAAa,CAAtFuB,mBAAmB,CAAEC,wBAAwB,CAA4BxB,aAAa,CAAjEwB,wBAAwB,CAAEC,qBAAqB,CAAKzB,aAAa,CAAvCyB,qBAAqB,CAAmB,OAAAF,mBAAA,CAAAC,wBAAA,CAAAC,qBAAA,EAEtG,MAAO,IAAM,CAAAC,UAAU,CAAGjC,WAAW,CAAC,CAClCkC,IAAI,CAAE,QAAQ,CACd/B,YAAY,CAAZA,YAAY,CACZgC,QAAQ,CAAE,CACNC,eAAe,CAAE,SAAAA,gBAAA,QAAM,CAAAjC,YAAY,EACvC,CACJ,CAAC,CAAC,CAEK,GAAQ,CAAAiC,eAAe,CAAKH,UAAU,CAACI,OAAO,CAAtCD,eAAe,CAAwB,OAAAA,eAAA,EAEtD,cAAe,CAAAH,UAAU,CAACK,OAAO"},"metadata":{},"sourceType":"module","externalDependencies":[]}